<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artikel - Digital Library</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Article page specific styles */
        .article-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .article-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 100, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            border-top: 4px solid var(--ipm-green);
            display: flex;
            flex-direction: column;
        }

        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 100, 0, 0.2);
        }

        .article-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--ipm-light-green) 0%, var(--ipm-light-yellow) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: var(--ipm-green);
            overflow: hidden;
            object-fit: cover;
        }

        .article-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .article-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .article-category {
            display: inline-block;
            background: var(--ipm-light-yellow);
            color: var(--ipm-green);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
            width: fit-content;
        }

        .article-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--ipm-green);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .article-excerpt {
            color: #666;
            font-size: 13px;
            line-height: 1.5;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .article-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
            font-size: 12px;
            color: #999;
        }

        .article-author {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .article-date {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .article-detail-modal {
            max-width: 800px;
        }

        .article-detail-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--ipm-light-green) 0%, var(--ipm-light-yellow) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            color: var(--ipm-green);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .article-detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .article-detail-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            flex-wrap: wrap;
        }

        .article-detail-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 14px;
        }

        .article-detail-meta-item i {
            color: var(--ipm-green);
            font-weight: 600;
        }

        .article-detail-body {
            font-size: 15px;
            line-height: 1.8;
            color: #333;
        }

        .article-detail-body h3 {
            color: var(--ipm-green);
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .article-detail-body p {
            margin-bottom: 15px;
        }

        .article-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            gap: 10px;
        }

        .article-action-btn {
            flex: 1;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .article-action-btn.primary {
            background: linear-gradient(135deg, var(--ipm-green) 0%, #004d00 100%);
            color: white;
        }

        .article-action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 100, 0, 0.3);
        }

        .article-action-btn.secondary {
            background: var(--ipm-light-yellow);
            color: var(--ipm-green);
        }

        .article-action-btn.secondary:hover {
            background: var(--ipm-yellow);
        }

        .create-article-btn {
            background: linear-gradient(135deg, var(--ipm-green) 0%, #004d00 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            margin-bottom: 30px;
        }

        .create-article-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 100, 0, 0.3);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state-icon {
            font-size: 80px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-state-title {
            font-size: 24px;
            color: var(--ipm-green);
            margin-bottom: 10px;
        }

        .empty-state-text {
            color: #666;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .article-grid {
                grid-template-columns: 1fr;
            }

            .article-detail-meta {
                flex-direction: column;
            }

            .article-detail-image {
                height: 200px;
                font-size: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1><i class="fas fa-newspaper"></i> Artikel</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">U</div>
                    <span id="userName">User</span>
                </div>
                <button onclick="window.location.href='dashboard.html'" class="btn-action">
                    <i class="fas fa-arrow-left"></i> Kembali
                </button>
            </div>
        </header>

        <div class="dashboard-content" style="display: flex;">
            <!-- Sidebar -->
            <nav class="dashboard-sidebar">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="books.html" class="nav-item">
                    <i class="fas fa-hand-holding-heart"></i> Peminjaman
                </a>
                <a href="artikel.html" class="nav-item active">
                    <i class="fas fa-newspaper"></i> Artikel
                </a>
                <a href="borrow.html" class="nav-item">
                    <i class="fas fa-undo"></i> Pengembalian
                </a>
                <div class="sidebar-divider"></div>
                <a href="admin.html" class="nav-item" id="adminMenu">
                    <i class="fas fa-user-cog"></i> Admin
                </a>
                <div class="sidebar-divider"></div>
                <a href="index.html" class="nav-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </nav>

            <!-- Main Content -->
            <main class="dashboard-main">
                <!-- Admin Create Button -->
                <div id="adminCreateContainer" style="display: none;">
                    <button onclick="openModal('createArticleModal')" class="create-article-btn">
                        <i class="fas fa-plus-circle"></i> Buat Artikel Baru
                    </button>
                </div>

                <!-- Articles Grid -->
                <div id="articlesContainer">
                    <div class="article-grid" id="articleGrid">
                        <!-- Article cards akan diisi oleh JavaScript -->
                    </div>
                </div>

                <!-- Empty State -->
                <div id="emptyState" style="display: none;">
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <h2 class="empty-state-title">Belum Ada Artikel</h2>
                        <p class="empty-state-text">Belum ada artikel yang tersedia. Silakan kembali lagi nanti.</p>
                        <button onclick="window.location.href='dashboard.html'" class="btn-action btn-return">
                            <i class="fas fa-arrow-left"></i> Kembali ke Dashboard
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Create Article Modal (Admin Only) -->
    <div id="createArticleModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>Buat Artikel Baru</h2>
                <button class="close-modal" onclick="closeModal('createArticleModal')">&times;</button>
            </div>
            <form id="createArticleForm" onsubmit="handleCreateArticle(event)">
                <div class="form-group">
                    <label><i class="fas fa-heading"></i> Judul Artikel <span style="color: #dc3545;">*</span></label>
                    <input type="text" id="articleTitle" placeholder="Masukkan judul artikel" required>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-tags"></i> Kategori <span style="color: #dc3545;">*</span></label>
                    <select id="articleCategory" required>
                        <option value="">Pilih kategori</option>
                        <option value="Berita">Berita</option>
                        <option value="Tips & Trik">Tips & Trik</option>
                        <option value="Edukasi">Edukasi</option>
                        <option value="Lifestyle">Lifestyle</option>
                        <option value="Inspirasi">Inspirasi</option>
                    </select>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-align-left"></i> Konten <span style="color: #dc3545;">*</span></label>
                    <textarea id="articleContent" placeholder="Tulis konten artikel..." rows="8" required></textarea>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-image"></i> Upload Gambar (Opsional)</label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="articleImage" accept="image/*" aria-label="Upload gambar artikel">
                        <div id="imagePreview" style="display: none; margin-top: 15px;">
                            <img id="previewImage" style="max-width: 100%; max-height: 200px; border-radius: 8px;" alt="Preview">
                            <button type="button" onclick="clearImagePreview()" class="btn-action" style="background: #dc3545; color: white; margin-top: 10px; width: 100%;">
                                <i class="fas fa-trash"></i> Hapus Gambar
                            </button>
                        </div>
                    </div>
                </div>
                <style>
                    .file-upload-wrapper {
                        position: relative;
                    }
                    .file-upload-wrapper input[type="file"] {
                        display: block;
                        width: 100%;
                        padding: 12px 15px;
                        border: 2px dashed var(--ipm-green);
                        border-radius: 8px;
                        background: #f0fff0;
                        cursor: pointer;
                        font-size: 14px;
                    }
                    .file-upload-wrapper input[type="file"]:hover {
                        background: #e8ffe8;
                    }
                </style>

                <div style="display: flex; gap: 10px;">
                    <button type="button" onclick="closeModal('createArticleModal')" class="btn-action" style="flex: 1; background: #6c757d; color: white;">
                        Batal
                    </button>
                    <button type="submit" class="btn-action btn-submit" style="flex: 1;">
                        <i class="fas fa-save"></i> Publikasikan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Article Detail Modal -->
    <div id="articleDetailModal" class="modal">
        <div class="modal-content article-detail-modal">
            <button class="close-modal" onclick="closeModal('articleDetailModal')">&times;</button>
            <div id="articleDetailContent" style="padding: 30px;">
                <!-- Content will be filled by JavaScript -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Variabel untuk menyimpan base64 image
        let selectedImageBase64 = '';

        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.username;
                
                // Show create button for admin only
                const adminCreateContainer = document.getElementById('adminCreateContainer');
                if (currentUser.role === 'admin') {
                    adminCreateContainer.style.display = 'block';
                }
                
                // Hide admin menu untuk user biasa
                const adminMenu = document.getElementById('adminMenu');
                if (currentUser.role !== 'admin') {
                    adminMenu.style.display = 'none';
                    const prevDivider = adminMenu.previousElementSibling;
                    if (prevDivider && prevDivider.classList.contains('sidebar-divider')) {
                        prevDivider.style.display = 'none';
                    }
                }
            }
            
            // Load articles
            loadArticles();

            // Handle file upload
            const imageInput = document.getElementById('articleImage');
            if (imageInput) {
                imageInput.addEventListener('change', handleImageUpload);
            }
        });

        function handleImageUpload(e) {
            const file = e.target.files[0];
            if (!file) return;

            // Validate file type
            if (!file.type.startsWith('image/')) {
                alert('❌ File harus berupa gambar');
                e.target.value = '';
                return;
            }

            // Validate file size (max 2MB)
            if (file.size > 2 * 1024 * 1024) {
                alert('❌ Ukuran gambar maksimal 2MB');
                e.target.value = '';
                return;
            }

            // Convert to base64
            const reader = new FileReader();
            reader.onload = function(event) {
                selectedImageBase64 = event.target.result;
                
                // Show preview
                document.getElementById('previewImage').src = selectedImageBase64;
                document.getElementById('imagePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        function clearImagePreview() {
            selectedImageBase64 = '';
            document.getElementById('articleImage').value = '';
            document.getElementById('imagePreview').style.display = 'none';
        }

        function loadArticles() {
            const articles = JSON.parse(localStorage.getItem('articles')) || [];
            const articleGrid = document.getElementById('articleGrid');
            const emptyState = document.getElementById('emptyState');

            if (articles.length === 0) {
                articleGrid.parentElement.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            // Sort by date descending
            articles.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            articleGrid.innerHTML = articles.map((article, index) => {
                const date = new Date(article.createdAt);
                const dateString = date.toLocaleDateString('id-ID', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                const excerpt = article.content.substring(0, 100) + '...';

                return `
                    <div class="article-card" onclick="viewArticle(${index})">
                        <div class="article-image">
                            ${article.image ? `<img src="${article.image}" alt="">` : '<i class="fas fa-newspaper"></i>'}
                        </div>
                        <div class="article-content">
                            <span class="article-category">${article.category}</span>
                            <h3 class="article-title">${article.title}</h3>
                            <p class="article-excerpt">${excerpt}</p>
                            <div class="article-footer">
                                <div class="article-author">
                                    <i class="fas fa-user"></i>
                                    <span>${article.author}</span>
                                </div>
                                <div class="article-date">
                                    <i class="fas fa-calendar"></i>
                                    <span>${dateString}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function viewArticle(index) {
            const articles = JSON.parse(localStorage.getItem('articles')) || [];
            const article = articles[index];
            
            if (!article) return;

            const date = new Date(article.createdAt);
            const dateString = date.toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // Calculate read time (roughly 200 words per minute)
            const wordCount = article.content.split(/\s+/).length;
            const readTime = Math.ceil(wordCount / 200);

            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const isAuthor = currentUser && currentUser.id === article.userId;
            const isAdmin = currentUser && currentUser.role === 'admin';

            // Format content with proper HTML structure
            const formattedContent = formatArticleContent(article.content);

            const detailHTML = `
                <div class="article-detail-header">
                    <h1 class="article-detail-title">${escapeHtml(article.title)}</h1>
                    
                    <div class="article-detail-byline">
                        <div class="article-author-info">
                            <div class="article-author-avatar">${article.author.charAt(0).toUpperCase()}</div>
                            <div>
                                <div class="article-author-name">${escapeHtml(article.author)}</div>
                                <div class="article-publish-date" style="margin-top: 4px;">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span>${dateString}</span>
                                </div>
                            </div>
                        </div>
                        <div class="article-read-time">
                            <i class="fas fa-clock"></i>
                            <span>${readTime} min baca</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; color: #999;">
                            <i class="fas fa-tag"></i>
                            <span class="article-category-badge">${escapeHtml(article.category)}</span>
                        </div>
                    </div>
                </div>

                <div class="article-detail-image">
                    ${article.image ? `<img src="${article.image}" alt="${escapeHtml(article.title)}">` : '<i class="fas fa-newspaper"></i>'}
                </div>

                <article class="article-body">
                    ${formattedContent}
                </article>

                ${isAuthor || isAdmin ? `
                    <div class="article-actions">
                        <button onclick="editArticle(${index})" class="article-action-btn secondary">
                            <i class="fas fa-edit"></i> Edit Artikel
                        </button>
                        <button onclick="confirmDeleteArticle(${index})" class="article-action-btn" style="background: #dc3545; color: white;">
                            <i class="fas fa-trash"></i> Hapus Artikel
                        </button>
                    </div>
                ` : ''}

                <div class="article-author-box">
                    <div class="article-author-box-avatar">${article.author.charAt(0).toUpperCase()}</div>
                    <div class="article-author-box-content">
                        <h3>Tentang Penulis</h3>
                        <p><strong>${escapeHtml(article.author)}</strong> adalah kontributor artikel di perpustakaan digital IPM Panawuan. Artikel ini dipublikasikan pada ${dateString}.</p>
                    </div>
                </div>

                <div class="article-tags">
                    <label class="article-tags-label"><i class="fas fa-hashtag"></i> Tags</label>
                    <div>
                        <span class="article-tag">${escapeHtml(article.category)}</span>
                        <span class="article-tag">Artikel</span>
                        <span class="article-tag">Organisasi</span>
                    </div>
                </div>

                <div class="article-share">
                    <label class="article-share-label"><i class="fas fa-share-alt"></i> Bagikan Artikel</label>
                    <div class="article-share-buttons">
                        <button class="article-share-btn" onclick="shareArticle('whatsapp', '${escapeHtml(article.title)}')">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </button>
                        <button class="article-share-btn" onclick="shareArticle('facebook', '${escapeHtml(article.title)}')">
                            <i class="fab fa-facebook"></i> Facebook
                        </button>
                        <button class="article-share-btn" onclick="copyArticleLink()">
                            <i class="fas fa-link"></i> Copy Link
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('articleDetailContent').innerHTML = detailHTML;
            openModal('articleDetailModal');
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        function formatArticleContent(content) {
            // Split content into paragraphs
            let html = content.split(/\n{2,}/).map(paragraph => {
                paragraph = paragraph.trim();
                if (!paragraph) return '';

                // Detect headings (## Heading or ### Heading)
                if (paragraph.startsWith('### ')) {
                    return `<h3>${escapeHtml(paragraph.replace(/^### /, ''))}</h3>`;
                }
                if (paragraph.startsWith('## ')) {
                    return `<h2>${escapeHtml(paragraph.replace(/^## /, ''))}</h2>`;
                }
                if (paragraph.startsWith('# ')) {
                    return `<h1>${escapeHtml(paragraph.replace(/^# /, ''))}</h1>`;
                }

                // Detect bullet lists
                if (paragraph.includes('•') || paragraph.includes('-')) {
                    const items = paragraph.split(/\n/).filter(line => line.trim());
                    return `<ul>${items.map(item => 
                        `<li>${escapeHtml(item.replace(/^[•\-]\s*/, '').trim())}</li>`
                    ).join('')}</ul>`;
                }

                // Detect blockquotes
                if (paragraph.startsWith('"') && paragraph.endsWith('"')) {
                    return `<blockquote>${escapeHtml(paragraph.slice(1, -1))}</blockquote>`;
                }

                // Regular paragraph
                let text = escapeHtml(paragraph);
                
                // Apply formatting (bold, italic)
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
                text = text.replace(/__(.*?)__/g, '<strong>$1</strong>');
                text = text.replace(/_(.*?)_/g, '<em>$1</em>');

                return `<p>${text}</p>`;
            }).join('');

            return html || '<p>Tidak ada konten</p>';
        }

        function shareArticle(platform, title) {
            const url = window.location.href;
            let shareUrl = '';

            switch(platform) {
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodeURIComponent(title + ' - ' + url)}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                    break;
            }

            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }

        function copyArticleLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert('✓ Link artikel berhasil disalin!');
            }).catch(() => {
                alert('Gagal menyalin link');
            });
        }

        function handleCreateArticle(event) {
            event.preventDefault();

            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser || currentUser.role !== 'admin') {
                alert('Hanya admin yang bisa membuat artikel');
                return;
            }

            const title = document.getElementById('articleTitle').value.trim();
            const category = document.getElementById('articleCategory').value;
            const content = document.getElementById('articleContent').value.trim();
            const image = selectedImageBase64;

            if (!title || !category || !content) {
                alert('Silakan isi semua field yang wajib');
                return;
            }

            const articles = JSON.parse(localStorage.getItem('articles')) || [];
            const newArticle = {
                id: articles.length > 0 ? Math.max(...articles.map(a => a.id || 0)) + 1 : 1,
                userId: currentUser.id,
                author: currentUser.fullname,
                title: title,
                category: category,
                content: content,
                image: image || '',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            articles.push(newArticle);
            localStorage.setItem('articles', JSON.stringify(articles));

            // Reset form
            document.getElementById('createArticleForm').reset();
            selectedImageBase64 = '';
            document.getElementById('imagePreview').style.display = 'none';
            closeModal('createArticleModal');

            // Reload articles
            loadArticles();
            alert('✓ Artikel berhasil dipublikasikan!');
        }

        function editArticle(index) {
            const articles = JSON.parse(localStorage.getItem('articles')) || [];
            const article = articles[index];

            if (!article) return;

            document.getElementById('articleTitle').value = article.title;
            document.getElementById('articleCategory').value = article.category;
            document.getElementById('articleContent').value = article.content;
            selectedImageBase64 = article.image;

            if (article.image) {
                document.getElementById('previewImage').src = article.image;
                document.getElementById('imagePreview').style.display = 'block';
            }

            // Modify form to update instead of create
            const form = document.getElementById('createArticleForm');
            form.onsubmit = function(e) {
                e.preventDefault();
                
                article.title = document.getElementById('articleTitle').value;
                article.category = document.getElementById('articleCategory').value;
                article.content = document.getElementById('articleContent').value;
                article.image = selectedImageBase64;
                article.updatedAt = new Date().toISOString();

                articles[index] = article;
                localStorage.setItem('articles', JSON.stringify(articles));

                form.onsubmit = handleCreateArticle;
                document.getElementById('createArticleForm').reset();
                selectedImageBase64 = '';
                document.getElementById('imagePreview').style.display = 'none';
                closeModal('createArticleModal');
                closeModal('articleDetailModal');
                loadArticles();
                alert('✓ Artikel berhasil diperbarui!');
            };

            closeModal('articleDetailModal');
            openModal('createArticleModal');
        }

        function confirmDeleteArticle(index) {
            if (confirm('Apakah Anda yakin ingin menghapus artikel ini?')) {
                deleteArticle(index);
            }
        }

        function deleteArticle(index) {
            const articles = JSON.parse(localStorage.getItem('articles')) || [];
            articles.splice(index, 1);
            localStorage.setItem('articles', JSON.stringify(articles));
            
            closeModal('articleDetailModal');
            loadArticles();
            alert('✓ Artikel berhasil dihapus!');
        }

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
